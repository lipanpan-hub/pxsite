{"title":"codesandbox编辑器自动回车bug","date":"2021-05-11T09:05:37.000Z","date_formatted":{"ll":"2021年5月11日","L":"2021/05/11","MM-DD":"05-11"},"link":"post/2021/202105/codesandbox编辑器自动回车bug","categories":["开发问题"],"updated":"2022-01-12T23:53:59.409Z","content":"<p>codesandbox 的编辑器中默认情况下是手动保存代码的<br>\n本来也没什么 但是 用的时间长了之后 发现手动保存还是挺烦的</p>\n<p>因为 是基于 vscode 的 编辑器 所以可以在 settings.json 当中设置自动保存代码</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;files.autoSave&quot;</span>: <span class=\"string\">&quot;afterDelay&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;files.autoSaveDelay&quot;</span>: <span class=\"number\">500</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>但是我设置完成自动保存代码之后 却出现了一个非常蛋疼的问题<br>\n就是 你如果在编辑器当中输入空白字符之后如果没有立即输入非空白字符 编辑器在自动保存的时候会认为这些空白字符无用而删除这些空白字符 光标自动回车到行首,就像下面这样:<br>\n<img src=\"https://search.pstatic.net/common/?src=https://i.imgur.com/qUXHpBC.gif\" alt=\"\" loading=\"lazy\"></p>\n<p>用google 查了半天 就是没发现 有人去解决这个问题 实在是很苦恼</p>\n<p>正在我苦恼的时候突然想起来 codesandbox 是基于vscode的在线编辑器</p>\n<p>这个可能是vscode 某个版本的一个bug  然后 codesandbox 用来这个版本的vscode 所以我可以从vscode 去下手</p>\n<p>果不其然 经过搜素我发现 vscode 在2018年11月的时候出现过一个bug 就是自动保存设置为 afterDelay 的时候会出现上述bug</p>\n<p>然后只要把 <code>files.autoSave</code>的值改成其他的值 就可以避免这个bug出现了</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// &quot;files.autoSave&quot;: &quot;afterDelay&quot;, // 不能用这个选项 afterdelay 会让editor出现bug</span></span><br><span class=\"line\">    <span class=\"comment\">// &quot;files.autoSaveDelay&quot;: 500,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;files.autoSave&quot;</span>: <span class=\"string\">&quot;onFocusChange&quot;</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>真没想到 vscode 18年的一个bug codesandbox 到现在还有<br>\n除了这个bug之外 我还发现 codesandbox 还有其他的各种乱七八遭的小 bug 不会太影响使用 但是着实有点蛋疼</p>\n","prev":{"title":"codesandbox为创建好的项目增加terminal","link":"post/2021/202105/codesandbox创建带terminal项目"},"next":{"title":"Vue CLI 使用","link":"post/2021/202103/Vue-CLI-使用"},"plink":"http://blog.lipanpanx.com/post/2021/202105/codesandbox编辑器自动回车bug/","reward":true,"copyright":{"author":"李攀攀","link":"<a href=\"http://blog.lipanpanx.com/post/2021/202105/codesandbox编辑器自动回车bug/\" title=\"codesandbox编辑器自动回车bug\">http://blog.lipanpanx.com/post/2021/202105/codesandbox编辑器自动回车bug/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"},"reading_time":"443 字约 3 分钟"}