{"title":"Hyper-V安装lede软路由","date":"2021-07-31T11:40:02.000Z","date_formatted":{"ll":"2021年7月31日","L":"2021/07/31","MM-DD":"07-31"},"link":"post/2021/202107/Hyper-V安装lede软路由","updated":"2022-02-01T01:24:26.644Z","content":"<h2 id=\"首先下载固件\">首先下载固件<a title=\"#首先下载固件\" href=\"#首先下载固件\"></a></h2>\n<p>固件可以去L大lede仓库的 github actions 页面下载.<br>\n<a href=\"https://github.com/coolsnowwolf/lede/actions\" target=\"_blank\">OpenWrt_firmware</a></p>\n<p>固件下载下来之后我们打开压缩包可以看到 压缩包内有许多的文件:</p>\n<p><img src=\"https://search.pstatic.net/common/?src=https://i.imgur.com/G6NTz7i.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<p>这里我们可以把img文件转换成为vhdx格式的硬盘映像文件,然后把映像文件挂在到hyper-v虚拟机 来实现 lede的安装.</p>\n<p>我们需要转换的文件就是: openwrt-x86-64-generic-squashfs-combined-efi.img. 因为是安装在x86平台 且efi文件系统能够与hyper-v 2代虚拟机适配.</p>\n<h2 id=\"然后用转换工具将-img文件转换成vhdx文件\">然后用转换工具将 img文件转换成vhdx文件<a title=\"#然后用转换工具将-img文件转换成vhdx文件\" href=\"#然后用转换工具将-img文件转换成vhdx文件\"></a></h2>\n<p>镜像转换可以去网上下载 StarWind V2V Image Converter转换工具安装到电脑上,然后执行下面的操作就行了.</p>\n<p><img src=\"https://search.pstatic.net/common/?src=https://i.imgur.com/XxpgZfq.png\" alt=\"选择镜像\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://search.pstatic.net/common/?src=https://i.imgur.com/7ygEiua.png\" alt=\"选择镜像\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://search.pstatic.net/common/?src=https://i.imgur.com/61YbSjZ.png\" alt=\"选择生成文件的存在形式\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://search.pstatic.net/common/?src=https://i.imgur.com/QqICe57.png\" alt=\"选择生成文件的格式\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://search.pstatic.net/common/?src=https://i.imgur.com/yqGwfZ2.png\" alt=\"选择生成文件的格式\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://search.pstatic.net/common/?src=https://i.imgur.com/bsqnN0o.png\" alt=\"选择生成文件的保存地址\" loading=\"lazy\" class=\"φbp\"></p>\n<p>点击转换就能在我们指定的目录当中 生成我们所需要的 vhdx文件了</p>\n<h2 id=\"然后创建虚拟机\">然后创建虚拟机<a title=\"#然后创建虚拟机\" href=\"#然后创建虚拟机\"></a></h2>\n<p>使用刚才生成的 vhdx文件创建虚拟机,需要注意下面几点:<br>\n1, 选择hyper-v的 第二代虚拟机<br>\n2, 配置网络的时候选择 一个 和宿主机共享网口的 外部网络虚拟交换机(方便从宿主机登录lede后台)<br>\n3, 虚拟硬盘选择我们刚才生成的vhdx文件<br>\n4, 关闭 虚拟机的 安全启动选项</p>\n<p>然后就能成功创建好一个lede虚拟机了<br>\n虚拟机创建完成之后 默认的ip地址是: 192.168.1.1 有时候这个地址不是我们所需要的, 我们可以在虚拟机当中执行下面的命令来完成网络地址的更改.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim  /etc/config/network <span class=\"comment\"># 把虚拟机默认网口的ip地址更改为 和宿主机同一网段的合法地址</span></span><br><span class=\"line\">cat network <span class=\"comment\"># 查看更改是否成功</span></span><br><span class=\"line\">service network restart <span class=\"comment\"># 重启网络服务</span></span><br><span class=\"line\">ifconfig <span class=\"comment\"># 查看网口地址是否更改</span></span><br><span class=\"line\">ping 192.168.31.1 <span class=\"comment\"># 查看是否能够ping通网关</span></span><br></pre></td></tr></table></figure>\n<p>搞定上述操作之后就能在宿主机打开lede的登录界面了,默认密码是password.</p>\n<p><img src=\"https://search.pstatic.net/common/?src=https://i.imgur.com/oHMfCpu.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"utools插件重载问题","link":"post/2021/202110/utools插件重载"},"next":{"title":"GithubActions编译lede固件","link":"post/2021/202107/GithubActions编译lede固件"},"plink":"http://blog.lipanpanx.com/post/2021/202107/Hyper-V安装lede软路由/","toc":[{"id":"首先下载固件","title":"首先下载固件","index":"1"},{"id":"然后用转换工具将-img文件转换成vhdx文件","title":"然后用转换工具将 img文件转换成vhdx文件","index":"2"},{"id":"然后创建虚拟机","title":"然后创建虚拟机","index":"3"}],"reward":true,"copyright":{"author":"李攀攀","link":"<a href=\"http://blog.lipanpanx.com/post/2021/202107/Hyper-V安装lede软路由/\" title=\"Hyper-V安装lede软路由\">http://blog.lipanpanx.com/post/2021/202107/Hyper-V安装lede软路由/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"},"reading_time":"673 字约 4 分钟"}