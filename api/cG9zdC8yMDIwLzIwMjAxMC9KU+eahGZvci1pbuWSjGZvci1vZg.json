{"title":"JS的for...in和for...of","date":"2020-10-30T08:29:08.000Z","date_formatted":{"ll":"2020年10月30日","L":"2020/10/30","MM-DD":"10-30"},"link":"post/2020/202010/JS的for-in和for-of","categories":["JS相关"],"updated":"2022-02-01T01:27:47.268Z","content":"<h2 id=\"for..in-和-for...of的区别和联系\">for…in 和 for…of的区别和联系<a title=\"#for..in-和-for...of的区别和联系\" href=\"#for..in-和-for...of的区别和联系\"></a></h2>\n<p>for…in和 for…of的区别和联系 似懂非懂的 今天正好有时间把这个东西搞清楚写篇文章纪念一下:</p>\n<p>首先看一个例子 这个例子来自于<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of#difference_between_for...of_and_for...in\" target=\"_blank\">Difference between for…of and for…in</a>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.objCustom = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;;</span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.arrCustom = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> iterable = [<span class=\"number\">3</span>, <span class=\"number\">5</span>, <span class=\"number\">7</span>];</span><br><span class=\"line\">iterable.foo = <span class=\"string\">&#x27;hello&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> i <span class=\"keyword\">in</span> iterable) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i); <span class=\"comment\">// 输出结果: &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;foo&quot;, &quot;arrCustom&quot;, &quot;objCustom&quot;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// 首先for...in 会迭代一个可迭代对象所有的 enumerable properties(可枚举属性) </span></span><br><span class=\"line\">  <span class=\"comment\">// 因为 继承和原型链的存在 导致 iterable 会从 Object和Array当中继承 objCustom和arrCustom, 这两个东西会被迭代</span></span><br><span class=\"line\">  <span class=\"comment\">// 除此之外 数组索引也是可枚举属性 也会被迭代</span></span><br><span class=\"line\">  <span class=\"comment\">// 可能有人会问 为什么不会迭代数组的值?  : 因为数组的值 是值 而不是属性, for...in 仅仅用来迭代属性 </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> i <span class=\"keyword\">in</span> iterable) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (iterable.hasOwnProperty(i)) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(i); <span class=\"comment\">// 输出结果: &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;foo&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 这里通过 hasOwnProperty() 做出判断仅仅对自己的属性进行迭代 不会继承的属性进行迭代</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> i <span class=\"keyword\">of</span> iterable) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i); <span class=\"comment\">// 输出结果: 3, 5, 7</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// for...of 对可迭代对象的值 进行迭代  而不会可迭代对象的属性 进行迭代 </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"不建议用for...in操作数组\">不建议用for…in操作数组<a title=\"#不建议用for...in操作数组\" href=\"#不建议用for...in操作数组\"></a></h2>\n<p>在上面的例子当中我们可以看到 for…in 可以用来迭代数组中的属性, 但是不仅仅是自己的属性,继承的属性也会被一起迭代, 因为迭代的顺序取决于实现方式,其实for…in的实现方式并不能保证 数组的属性按照某个特定的顺序进行迭代, 如果操作的顺序非常重要的话建议使用<code>Array.prototype.forEach()</code> or <code>for...of</code>. 更详细内容参考:<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in#array_iteration_and_for...in\" target=\"_blank\">Array iteration and for…in</a></p>\n<h2 id=\"for...in到底用来干嘛呢?\">for…in到底用来干嘛呢?<a title=\"#for...in到底用来干嘛呢?\" href=\"#for...in到底用来干嘛呢?\"></a></h2>\n<p>大部分的 情况下我们使用数组保存我们的数据, 如果for…in 不用来操作数组, 那么这个语句存在的意义又是什么呢?<br>\n其实for…in 用来进行debug还是非常方便的, 毕竟可以输出所有属性, 还有就是针对键值对数据, 如果你想判定某个键值对的键是某个特定的值 那就可以使用for…in 进行很方便的检查. 更详细的内容参考:<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in#why_use_for...in\" target=\"_blank\">Why Use for…in?</a></p>\n<h2 id=\"如何判定可枚举属性和可迭代对象?\">如何判定可枚举属性和可迭代对象?<a title=\"#如何判定可枚举属性和可迭代对象?\" href=\"#如何判定可枚举属性和可迭代对象?\"></a></h2>\n<p>我们知道 for…in 对对象的可枚举属性进行迭代 而 for…of 对可迭代对象的值进行迭代, 关于可枚举属性和可迭代对象 其实mdn中有相关的文档进行介绍 具体参考下面的链接:</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties\" target=\"_blank\">Enumerability and ownership of properties</a><br>\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators#iterables\" target=\"_blank\">Iterables</a></p>\n","prev":{"title":"搭建Hexo博客","link":"post/2021/202101/搭建Hexo博客"},"next":{"title":"Javascript IIFE(Immediately Invoked Function Expression)","link":"post/2020/202010/Javascript-IIFE"},"plink":"http://blog.lipanpanx.com/post/2020/202010/JS的for-in和for-of/","toc":[{"id":"for..in-和-for...of的区别和联系","title":"for…in 和 for…of的区别和联系","index":"1"},{"id":"不建议用for...in操作数组","title":"不建议用for…in操作数组","index":"2"},{"id":"for...in到底用来干嘛呢?","title":"for…in到底用来干嘛呢?","index":"3"},{"id":"如何判定可枚举属性和可迭代对象?","title":"如何判定可枚举属性和可迭代对象?","index":"4"}],"reward":true,"copyright":{"author":"李攀攀","link":"<a href=\"http://blog.lipanpanx.com/post/2020/202010/JS的for-in和for-of/\" title=\"JS的for...in和for...of\">http://blog.lipanpanx.com/post/2020/202010/JS的for-in和for-of/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"},"reading_time":"722 字约 5 分钟"}