{"title":"netlify-cli安装E404错误(找不到依赖项)解决","date":"2021-11-09T10:46:46.000Z","date_formatted":{"ll":"2021年11月9日","L":"2021/11/09","MM-DD":"11-09"},"link":"post/2021/202111/netlify-cli安装教程","categories":["开发问题"],"updated":"2022-01-31T22:51:43.247Z","content":"<p>今天打算安装 netlify-cli</p>\n<p>于是打开 terminal 运行了一下</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install netlify-cli -g </span><br></pre></td></tr></table></figure>\n<p>结果 上来就是一顿错误</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm ERR! code E404</span><br><span class=\"line\">npm ERR! <span class=\"number\">404</span> Not Found - GET https:<span class=\"comment\">//oss.npmmirror.com/netlify/-/netlify-8.0.4.tgz</span></span><br><span class=\"line\">npm ERR! <span class=\"number\">404</span></span><br><span class=\"line\">npm ERR! <span class=\"number\">404</span>  <span class=\"string\">&#x27;netlify@https://registry.npm.taobao.org/netlify/-/netlify-8.0.4.tgz&#x27;</span> is not <span class=\"keyword\">in</span> <span class=\"built_in\">this</span> registry.</span><br><span class=\"line\">npm ERR! <span class=\"number\">404</span> You should bug the author to publish it (or use the name yourself!)</span><br><span class=\"line\">npm ERR! <span class=\"number\">404</span></span><br><span class=\"line\">npm ERR! <span class=\"number\">404</span> Note that you can also install <span class=\"keyword\">from</span> a</span><br><span class=\"line\">npm ERR! <span class=\"number\">404</span> tarball, folder, http url, or git url.</span><br><span class=\"line\"></span><br><span class=\"line\">npm ERR! A complete log <span class=\"keyword\">of</span> <span class=\"built_in\">this</span> run can be found <span class=\"keyword\">in</span>:</span><br><span class=\"line\">npm ERR!     C:\\Users\\lipanpan\\AppData\\Local\\npm-cache\\_logs\\<span class=\"number\">2021</span>-<span class=\"number\">11</span>-09T02_43_45_128Z-debug.log</span><br></pre></td></tr></table></figure>\n<p>报错信息显示 无法在registry 当中找到 netlify-8.0.4.tgz</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lipanpan&gt; npm view netlify versions</span><br><span class=\"line\">[ ...省略若干</span><br><span class=\"line\">  <span class=\"string\">&#x27;6.1.10&#x27;</span>,       <span class=\"string\">&#x27;6.1.11&#x27;</span>,       <span class=\"string\">&#x27;6.1.13&#x27;</span>,       <span class=\"string\">&#x27;6.1.14&#x27;</span>,       <span class=\"string\">&#x27;6.1.15&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;6.1.16&#x27;</span>,       <span class=\"string\">&#x27;6.1.17&#x27;</span>,       <span class=\"string\">&#x27;6.1.18&#x27;</span>,       <span class=\"string\">&#x27;6.1.19&#x27;</span>,       <span class=\"string\">&#x27;6.1.20&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;6.1.21&#x27;</span>,       <span class=\"string\">&#x27;6.1.22&#x27;</span>,       <span class=\"string\">&#x27;6.1.23&#x27;</span>,       <span class=\"string\">&#x27;6.1.24&#x27;</span>,       <span class=\"string\">&#x27;6.1.25&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;6.1.26&#x27;</span>,       <span class=\"string\">&#x27;6.1.27&#x27;</span>,       <span class=\"string\">&#x27;6.1.28&#x27;</span>,       <span class=\"string\">&#x27;6.1.29&#x27;</span>,       <span class=\"string\">&#x27;7.0.0&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;7.0.1&#x27;</span>,        <span class=\"string\">&#x27;8.0.0&#x27;</span>,        <span class=\"string\">&#x27;8.0.1&#x27;</span>,        <span class=\"string\">&#x27;8.0.2&#x27;</span>,        <span class=\"string\">&#x27;8.0.3&#x27;</span></span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>我看了下确实没这个版本 最高版本就是8.0.3 但是这个包的最新版本(8.0.4)6天前已经在npm上面发布了<br>\n<img src=\"https://search.pstatic.net/common/?src=https://i.imgur.com/Qj0oEnI.png\" alt=\"\" loading=\"lazy\"></p>\n<p>因为我使用的是 淘宝的 npm镜像来加速安装</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lipanpan&gt; npm config get registry</span><br><span class=\"line\"><span class=\"attr\">https</span>:<span class=\"comment\">//registry.npm.taobao.org/</span></span><br></pre></td></tr></table></figure>\n<p>所以导致安装失败的原因看起来 好像是淘宝npm镜像没有同步更新<br>\n我打开了淘宝镜像的网站(<code>https://npmmirror.com/</code>) 然后发现 register 地址不知何时从 <code>https://registry.npm.taobao.org/</code> 变成了 <code>https://registry.npmmirror.com/</code> 然后我通过域名解析查询 发现这两个域名指向相同的A地址.所以应该仅仅是变了一下域名.</p>\n<p>淘宝npm镜像的说明是 如果第一次安装失败 它会在后台自动同步 在后续安装的时候确保成功<br>\n我连续尝试了好几次都是安装失败  看来这个说明并不靠谱<br>\n然后 还有个 手动同步npm包的操作 就是手动执行  <code>$ cnpm sync xxxx</code> 但是我没安装cnpm, 着实让我感觉到蛋疼</p>\n<p>最后我选择换回 官方的 registery地址</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lipanpan&gt; npm config set registry https:<span class=\"comment\">//registry.npmjs.org</span></span><br><span class=\"line\">lipanpan&gt; npm config get registry</span><br><span class=\"line\"><span class=\"attr\">https</span>:<span class=\"comment\">//registry.npmjs.org/</span></span><br></pre></td></tr></table></figure>\n<p>通过官方的reigstry 是可以看到最新版本的 netlify(8.0.4)包的</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lipanpan&gt; npm view netlify versions</span><br><span class=\"line\">[ ...省略若干</span><br><span class=\"line\">  <span class=\"string\">&#x27;6.1.21&#x27;</span>,       <span class=\"string\">&#x27;6.1.22&#x27;</span>,       <span class=\"string\">&#x27;6.1.23&#x27;</span>,       <span class=\"string\">&#x27;6.1.24&#x27;</span>,       <span class=\"string\">&#x27;6.1.25&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;6.1.26&#x27;</span>,       <span class=\"string\">&#x27;6.1.27&#x27;</span>,       <span class=\"string\">&#x27;6.1.28&#x27;</span>,       <span class=\"string\">&#x27;6.1.29&#x27;</span>,       <span class=\"string\">&#x27;7.0.0&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;7.0.1&#x27;</span>,        <span class=\"string\">&#x27;8.0.0&#x27;</span>,        <span class=\"string\">&#x27;8.0.1&#x27;</span>,        <span class=\"string\">&#x27;8.0.2&#x27;</span>,        <span class=\"string\">&#x27;8.0.3&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;8.0.4&#x27;</span></span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>然后安装 netlify-cli 一次性成功</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lipanpan&gt; npm install netlify-cli -g </span><br><span class=\"line\">...</span><br><span class=\"line\">lipanpan&gt; netlify version</span><br><span class=\"line\">netlify-cli/<span class=\"number\">6.14</span><span class=\"number\">.18</span> win32-x64 node-v16<span class=\"number\">.13</span><span class=\"number\">.0</span></span><br><span class=\"line\">lipanpan&gt;</span><br></pre></td></tr></table></figure>\n","prev":{"title":"Hexo+Inside+Github+(NetlifyCMS+Vercel+Cloudflare)构建全球可高速访问的静态站点","link":"post/2021/202111/为博客添加内容管理系统"},"next":{"title":"关闭vscode烦人的Github登陆弹窗","link":"post/2021/202111/关闭vscode烦人的Github登陆弹窗"},"plink":"http://blog.lipanpanx.com/post/2021/202111/netlify-cli安装教程/","reward":true,"copyright":{"author":"李攀攀","link":"<a href=\"http://blog.lipanpanx.com/post/2021/202111/netlify-cli安装教程/\" title=\"netlify-cli安装E404错误(找不到依赖项)解决\">http://blog.lipanpanx.com/post/2021/202111/netlify-cli安装教程/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"},"reading_time":"718 字约 5 分钟"}